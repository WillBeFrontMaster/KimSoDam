2022 / 06 / 16
Study
---------------
## 스코프 (Scope)
영단어 의미가 '범위'이듯 프로그래밍에서도 '범위'를 뜻함.

**❗️ 스코프란?**
**👉 식별자 접근 규칙에 따른 유효 범위**

-   **스코프의 정의**는  **“식별자 접근 규칙에 따른 유효 범위”**
-   식별자(변수, 함수, 클래스)에 접근할 수 있는 범위가 존재
-   **범위**는  **중괄호(블록)**  또는  **함수**에 의해 나눠짐
-   그 범위를 스코프라고 부름
-   그래서 각각을 Block Scope와 Function Scope라고 부름

**❗️ 스코프의 주요 규칙**

 **👉 규칙1. 안쪽 스코프에서 바깥쪽 스코프로 접근할 수 있지만 반대는 불가능.**

-   바깥쪽 스코프에서 선언한 식별자는 안쪽 스코프에서 사용 가능.
-   반면, 안쪽에서 선언한 식별자는 바깥쪽 스코프에서는 사용할 수 없음.

**👉 규칙2. 스코프는 중첩이 가능.**

-   스코프는 마치 중첩된 울타리와도 같다.

 **👉 규칙3. 전역 스코프와 지역 스코프**

-   가장 바깥쪽의 스코프를  **전역 스코프(Global Scope)**라고 부름.
-   전역이 아닌 다른 스코프는 전부  **지역 스코프(Local Scope)**.

**👉 규칙4. 지역 변수는 전역 변수보다 우선순위가 더 높음.**

-   전역 스코프에서 선언한 변수는  **전역 변수**.
-   지역 스코프에서 선언한 변수는  **지역 변수**.
-   **지역 변수는 전역 변수보다 더 높은 우선순위**를 가짐.

 **❗️스코프의 종류**

-   스코프의 두가지 종류 블록 스코프와 함수 스코프가 있음.
-   화살표 함수는 함수 스코프가 아님.

>  **주의해야할 점은 화살표 함수는 블록 스코프로 취급.**

**❗️스코프와 `var`, `let`, `const` 키워드**

-   변수  **선언 키워드** 세 가지의 **‘차이점’** 그리고 **‘스코프 유효 범위’**는 아래와 같음.

 **👉 `const` 키워드**

-   유효 범위 : 블록 스코프 / 함수 스코프
-   값 재할당 : 불가능
-   재선언 : 불가능

 **👉 `let` 키워드**

-   유효 범위 : 블록 스코프 / 함수 스코프
-   값 재할당 : 가능
-   재선언 : 불가능

**👉 `var` 키워드**

-   유효 범위 : 함수 스코프
-   값 재할당 : 가능
-   재선언 : 가능

[![const-vs-let-vs-var](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/06/const-vs-let-vs-var.png?resize=477%2C248&ssl=1)](https://hanamon.kr/javascript-%ec%8a%a4%ec%bd%94%ed%94%84%ec%99%80-%eb%b3%80%ec%88%98%ec%84%a0%ec%96%b8%ed%82%a4%ec%9b%8c%eb%93%9c-%ec%b0%a8%ec%9d%b4%ec%a0%90/const-vs-let-vs-var/)

```js
for(let i=0; i<10; i++)  {
	console.log(i);
}

// 전역스코프에서 선언한 변수 i 는 존재하지 않음으로 아래에서 ReferenceErrer을 일으킨다.
console.log(i); // ReferenceErrer
```
-   블록 스코프 안에서 **`let`과 `const` 키워드**로 선언한 변수는  **스코프 안에서만 참조 가능**
-   그런데  **`var` 키워드**로 선언한 변수는  **블록 스코프를 무시**하고 스코프 울타리 밖에서도 접근 가능. (`var`는 Only 함수 스코프만 따른다.)
```js
for(var i=0; i<10; i++)  {
	console.log(i);
}

// var 키워드로 선언한 변수 i 는 지역 스코프에서 선언되었지만 모든 스코프에서 접근 가능하다.
console.log(i); // 9
```

-   **`var` 키워드**로 선언한 변수는  **only ‘함수 스코프’만**을 따른다.

> **그러나 블록 단위로 스코프를 구분했을 때, 훨씬 더 예측 가능한 코드를 작성할 수 있으므로 `let` 키워드의 사용이 권장된다.**

 **❗️스코프와 관련해서 변수 선언시 주의점**

 **👉 전역 객체(window)의 이해**

-   **Window 객체**는  **only 브라우저에만**  존재하는 객체.
-   브라우저의 창(window)를 의미하는 객체.
-   그런데 별개로 전역 영역을 담고 있기도 함.
-   그래서  **함수 선언식**으로 함수를 선언하거나  **`var` 키워드**로 변수를 선언하면  **window 객체에 속해짐.**

[![전역에 선언한 var변수](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/05/%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%A8%E1%84%8B%E1%85%A6-%E1%84%89%E1%85%A5%E1%86%AB%E1%84%8B%E1%85%A5%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AB-var%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%AE.png?resize=345%2C306&ssl=1)](https://hanamon.kr/javascript-%ed%95%a8%ec%88%98%eb%a5%bc-%ec%95%8c%ec%95%84%eb%b3%b4%ec%9e%90-1/%e1%84%8c%e1%85%a5%e1%86%ab%e1%84%8b%e1%85%a7%e1%86%a8%e1%84%8b%e1%85%a6-%e1%84%89%e1%85%a5%e1%86%ab%e1%84%8b%e1%85%a5%e1%86%ab%e1%84%92%e1%85%a1%e1%86%ab-var%e1%84%87%e1%85%a7%e1%86%ab%e1%84%89/)

전역에 `var` 키워드로 선언한 변수, `a` / 전역에 `let` 키워드로 선언한 변수, `b`

[![전역에 정의한 함수](https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/05/%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%A8%E1%84%8B%E1%85%A6-%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%8B%E1%85%B4%E1%84%92%E1%85%A1%E1%86%AB-%E1%84%92%E1%85%A1%E1%86%B7%E1%84%89%E1%85%AE.png?resize=345%2C304&ssl=1)](https://hanamon.kr/javascript-%ed%95%a8%ec%88%98%eb%a5%bc-%ec%95%8c%ec%95%84%eb%b3%b4%ec%9e%90-1/%e1%84%8c%e1%85%a5%e1%86%ab%e1%84%8b%e1%85%a7%e1%86%a8%e1%84%8b%e1%85%a6-%e1%84%8c%e1%85%a5%e1%86%bc%e1%84%8b%e1%85%b4%e1%84%92%e1%85%a1%e1%86%ab-%e1%84%92%e1%85%a1%e1%86%b7%e1%84%89%e1%85%ae/)

전역에 함수 선언식으로 등록한 함수, `myFn()`

 **👉 전역 변수는 최소화하기**

-   가장 바깥 스코프에 정의한 변수가 전역 변수.
-   즉,  **어디서든 접근이 가능**.
-   전역 변수를 최소화 하면  **side effect(의도하지 않은 로직에 의해 문제 발생)**를 줄일 수 있음.
-   그런데 그러한 전역 변수를  **심지어 `var`로 선언하는 경우 문제**가 될 수 있음.
    -   전역 변수는 어디서나 접근이 가능.
    -   `var` 키워드는 블록 스코프를 무시.
    -   재선언과 재할당을 할 수 있음.
    -   전역 변수를 `var`로 선언해서 브라우저의 내장 기능을 못하게 만들 수도 있음.

**👉 선언 없는 변수 할당 금지**

-   선언 없이 변수를 할당하면 해당 변수는  **`var`로 선언한 전역 변수 처럼 취급**
-   실수를 방지하기 위해 Strict Mode를 사용할 수 있음.
    -   **Strict Mode**는 브라우저가 보다 엄격하게 작동하도록 만들어 줌.
    -   “선언 없는 변수 할당”의 경우도 에러로 판단.
    -   적용하려면,  **js 파일 상단에 `‘use strict’`라고 입력**하면 됨. (따옴표 포함)
